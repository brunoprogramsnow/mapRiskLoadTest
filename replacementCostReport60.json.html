<!DOCTYPE html>
<html>
<head>
  <title>Artillery report</title>
  <script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.0/d3.min.js' charset='utf-8'></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/metrics-graphics/2.6.0/metricsgraphics.min.js"></script>

  <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
  <link href='https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/3.10.1/lodash.min.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.0/ace.js" charset="utf-8"></script>

  <style>
  body, p, li {
    font-family: sans-serif;
    font-size: 10pt;
  }

  h1 {
    font-size: 18pt;
    font-weight: bold;
  }

  #errorsContainer > p {
    color: #009900;
  }

  #footer {
    padding: 1em;
    font-size: 0.8em;
    color: #999;
    text-align: center;
    margin-top: 1em;
    background-color: #eee;
  }
  #editor {
    font-size: 8pt;
    height: 20em;
  }
  </style>

  <script>
  window.Report = {
  "aggregate": {
    "timestamp": "2016-11-21T20:14:54.178Z",
    "scenariosCreated": 60,
    "scenariosCompleted": 60,
    "requestsCompleted": 60,
    "latency": {
      "min": 1911.1,
      "max": 9135.8,
      "median": 2151.2,
      "p95": 2919.1,
      "p99": 8520.8
    },
    "rps": {
      "count": 60,
      "mean": 0.96
    },
    "scenarioDuration": {
      "min": 1914.4,
      "max": 9139.1,
      "median": 2156.8,
      "p95": 2923.3,
      "p99": 8525.3
    },
    "scenarioCounts": {
      "0": 60
    },
    "errors": {},
    "codes": {
      "200": 60
    },
    "matches": 0,
    "customStats": {},
    "phases": [
      {
        "duration": 60,
        "arrivalRate": 1
      }
    ]
  },
  "intermediate": [
    {
      "timestamp": "2016-11-21T20:13:59.111Z",
      "scenariosCreated": 8,
      "scenariosCompleted": 6,
      "requestsCompleted": 6,
      "latency": {
        "min": 1991.9,
        "max": 2983.2,
        "median": 2176.8,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 8,
        "mean": 1.07
      },
      "scenarioDuration": {
        "min": 1994.7,
        "max": 3001,
        "median": 2182.2,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {
        "0": 8
      },
      "errors": {},
      "codes": {
        "200": 6
      },
      "matches": 0,
      "latencies": [
        [
          1479759234389,
          "87eb873c-1c97-40c7-a0f6-b2a676bf13bd",
          2745514848,
          200
        ],
        [
          1479759235609,
          "205c9672-efe6-463c-923b-7b27fbb59cdf",
          2983235032,
          200
        ],
        [
          1479759235614,
          "92f2628b-d129-4158-a3fc-bf9d65e4aff0",
          1996183613,
          200
        ],
        [
          1479759236827,
          "2c482df7-da4a-4e82-b65f-db024630e57a",
          2211198610,
          200
        ],
        [
          1479759237763,
          "e6386d14-6ccb-46d5-9115-53fdc83e087d",
          2142386839,
          200
        ],
        [
          1479759238617,
          "9e9aec90-37a1-4321-ab09-939c46e11c0b",
          1991912112,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 17,
      "pendingRequests": 14
    },
    {
      "timestamp": "2016-11-21T20:14:09.123Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 9,
      "requestsCompleted": 9,
      "latency": {
        "min": 1911.1,
        "max": 2379.8,
        "median": 2007.2,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.05
      },
      "scenarioDuration": {
        "min": 1914.4,
        "max": 2383.4,
        "median": 2012.1,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {
        "0": 10
      },
      "errors": {},
      "codes": {
        "200": 9
      },
      "matches": 0,
      "latencies": [
        [
          1479759239623,
          "e4c64583-38e4-448e-8734-1c52f3d8f576",
          2007230993,
          200
        ],
        [
          1479759240525,
          "a47024f6-7e94-44e9-9a02-b0f0e5da2169",
          1911108983,
          200
        ],
        [
          1479759241546,
          "35c4ea81-6989-4d09-a856-f308f9e5a7af",
          1931850190,
          200
        ],
        [
          1479759242763,
          "9117e64e-5bf4-40f5-aa94-641226dc06f6",
          2149776715,
          200
        ],
        [
          1479759243617,
          "34049a7d-2938-4c70-9646-266595fa2d74",
          2003116494,
          200
        ],
        [
          1479759244751,
          "917976b4-a5a5-40bf-bb53-6a4450bccaf8",
          2136858867,
          200
        ],
        [
          1479759245994,
          "f7cde4a7-b1c7-4279-9bd3-85fe76987d3b",
          2379757219,
          200
        ],
        [
          1479759246617,
          "e849b5dc-3ef1-43e5-9cc4-6637fbe28034",
          2003131803,
          200
        ],
        [
          1479759247891,
          "22a90d18-db74-47a7-a07e-b2f8a83f52bc",
          2277255712,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 25,
      "pendingRequests": 25
    },
    {
      "timestamp": "2016-11-21T20:14:19.134Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 2012.3,
        "max": 2363.4,
        "median": 2143.3,
        "p95": 2363.4,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.05
      },
      "scenarioDuration": {
        "min": 2016.7,
        "max": 2367.1,
        "median": 2149.6,
        "p95": 2367.1,
        "p99": null
      },
      "scenarioCounts": {
        "0": 10
      },
      "errors": {},
      "codes": {
        "200": 10
      },
      "matches": 0,
      "latencies": [
        [
          1479759248669,
          "50713f50-7fa5-4cba-abbc-108e5d30dbd9",
          2054856168,
          200
        ],
        [
          1479759249807,
          "cba84bc9-cbd0-463b-a66c-0d8228ac7c6c",
          2191618128,
          200
        ],
        [
          1479759250825,
          "1704e685-7f95-47b3-8ad5-8ac6788e2c62",
          2210990660,
          200
        ],
        [
          1479759251742,
          "2b29a239-fb1a-4347-8e20-9b44e54dfcb4",
          2123315469,
          200
        ],
        [
          1479759252778,
          "631c11c1-19dc-4b36-be10-39329fea4c9c",
          2163352355,
          200
        ],
        [
          1479759253978,
          "04aae3b4-c761-4e5e-bea4-8e0b24ae52f7",
          2363430383,
          200
        ],
        [
          1479759254723,
          "f5491a4b-efdd-4d08-8046-cde804e2c1af",
          2108753850,
          200
        ],
        [
          1479759255627,
          "98e3eba6-b959-4332-87f4-fdd98f6e88f9",
          2012314519,
          200
        ],
        [
          1479759256655,
          "c242fc8b-ee22-4220-a6c5-ae09b14b9fee",
          2034588614,
          200
        ],
        [
          1479759257894,
          "d22e6fcc-e54d-478e-af86-95bbe9104ff8",
          2278778310,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 28,
      "pendingRequests": 28
    },
    {
      "timestamp": "2016-11-21T20:14:29.143Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 1950.4,
        "max": 2363.2,
        "median": 2106.5,
        "p95": 2363.2,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.05
      },
      "scenarioDuration": {
        "min": 1955.6,
        "max": 2368.2,
        "median": 2109.5,
        "p95": 2368.2,
        "p99": null
      },
      "scenarioCounts": {
        "0": 10
      },
      "errors": {},
      "codes": {
        "200": 10
      },
      "matches": 0,
      "latencies": [
        [
          1479759258810,
          "3fe9198d-ee8c-4469-ad1a-6601f03a0f1b",
          2195381285,
          200
        ],
        [
          1479759259749,
          "9236a99c-3459-4863-ab36-714100591ba1",
          2135273988,
          200
        ],
        [
          1479759260617,
          "315b5caa-d675-4b94-8aaf-ac8d4f121c6a",
          2003036978,
          200
        ],
        [
          1479759261567,
          "7f0566bb-491a-4b5c-b6b3-af1863b08424",
          1950430197,
          200
        ],
        [
          1479759262692,
          "7b4a0d8a-862f-4ce2-8527-3ed0b73f3880",
          2077724560,
          200
        ],
        [
          1479759263756,
          "eb8d4820-7fcc-41e7-8953-010d614e16f8",
          2142157970,
          200
        ],
        [
          1479759264621,
          "07ff9e5a-8c31-46dc-bcfe-5608e0981336",
          2005825869,
          200
        ],
        [
          1479759265657,
          "9893d449-93e9-4a5e-8c8a-cdb90b2c5a81",
          2041457683,
          200
        ],
        [
          1479759266767,
          "cd9b3602-e2c5-4c2e-9a81-000d2795cdba",
          2150437015,
          200
        ],
        [
          1479759267979,
          "f6d6f219-48b6-4d6f-8526-7432ada57c16",
          2363239846,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 25,
      "pendingRequests": 25
    },
    {
      "timestamp": "2016-11-21T20:14:39.150Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 10,
      "requestsCompleted": 10,
      "latency": {
        "min": 2028.1,
        "max": 2542.5,
        "median": 2223.6,
        "p95": 2542.5,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.05
      },
      "scenarioDuration": {
        "min": 2034,
        "max": 2545.5,
        "median": 2227.5,
        "p95": 2545.5,
        "p99": null
      },
      "scenarioCounts": {
        "0": 10
      },
      "errors": {},
      "codes": {
        "200": 10
      },
      "matches": 0,
      "latencies": [
        [
          1479759269090,
          "4c169372-8b09-43ab-9b66-6557e1e2b3f3",
          2476222300,
          200
        ],
        [
          1479759269917,
          "98a18674-7678-4ae9-9110-b6ffe5ff841c",
          2302179472,
          200
        ],
        [
          1479759270894,
          "35f48cbe-c858-474c-b60e-09b16c65fd5b",
          2278834477,
          200
        ],
        [
          1479759271771,
          "1549c3e0-3f46-421f-a8df-a141e43589cf",
          2151870597,
          200
        ],
        [
          1479759272949,
          "98881ab5-47b9-41a0-939f-bb7447b39004",
          2333894976,
          200
        ],
        [
          1479759273646,
          "1afd3874-b210-46fb-985d-4ff1d92e5765",
          2028097838,
          200
        ],
        [
          1479759274784,
          "01d9d195-52cc-4bc6-a498-7a78d77f1b3d",
          2168373657,
          200
        ],
        [
          1479759276157,
          "ba3c7d67-f800-4063-8b62-452dbc75eeff",
          2542526668,
          200
        ],
        [
          1479759276770,
          "cbfb595a-824b-46cc-8525-fc65dfd557f7",
          2154947068,
          200
        ],
        [
          1479759277651,
          "a5f2bcec-2adb-4462-b398-020577a93af0",
          2034463385,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 28,
      "pendingRequests": 27
    },
    {
      "timestamp": "2016-11-21T20:14:49.159Z",
      "scenariosCreated": 10,
      "scenariosCompleted": 9,
      "requestsCompleted": 9,
      "latency": {
        "min": 1947.1,
        "max": 2985.7,
        "median": 2171,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 10,
        "mean": 1.05
      },
      "scenarioDuration": {
        "min": 1949.6,
        "max": 2988.9,
        "median": 2173.5,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {
        "0": 10
      },
      "errors": {},
      "codes": {
        "200": 9
      },
      "matches": 0,
      "latencies": [
        [
          1479759278914,
          "6a1feb3a-0d23-4ec2-9e9e-40fb48c63ce9",
          2299316168,
          200
        ],
        [
          1479759279770,
          "e8ec19cd-fb75-4a22-8945-291cac15e9bb",
          2155035776,
          200
        ],
        [
          1479759280947,
          "c852779e-5755-41ff-8280-624a1d867000",
          2331618017,
          200
        ],
        [
          1479759281835,
          "030ee208-e49c-4d5b-9a8a-6190748f934a",
          2220536096,
          200
        ],
        [
          1479759282618,
          "7cbd9f06-5de6-454a-a24c-24a51f601091",
          2003104463,
          200
        ],
        [
          1479759283738,
          "f07763f1-0268-4fbb-a5fe-3ca7ba34c37a",
          2123480807,
          200
        ],
        [
          1479759284786,
          "8ed3405d-8dce-4828-8b95-c8fb24a6d506",
          2170977746,
          200
        ],
        [
          1479759286601,
          "b2bcaf7e-6053-4ed5-845b-ec0d480a8074",
          2985715172,
          200
        ],
        [
          1479759287562,
          "ad7330ab-c32c-4961-a0dc-06266d05f167",
          1947145372,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 27,
      "pendingRequests": 27
    },
    {
      "timestamp": "2016-11-21T20:14:54.148Z",
      "scenariosCreated": 2,
      "scenariosCompleted": 6,
      "requestsCompleted": 6,
      "latency": {
        "min": 2016.8,
        "max": 9135.8,
        "median": 2489.9,
        "p95": null,
        "p99": null
      },
      "rps": {
        "count": 2,
        "mean": 0.44
      },
      "scenarioDuration": {
        "min": 2019.2,
        "max": 9139.1,
        "median": 2493.8,
        "p95": null,
        "p99": null
      },
      "scenarioCounts": {
        "0": 2
      },
      "errors": {},
      "codes": {
        "200": 6
      },
      "matches": 0,
      "latencies": [
        [
          1479759289469,
          "baa23cd6-60ae-4be6-9afe-3a954024758a",
          2854996998,
          200
        ],
        [
          1479759290069,
          "b6a32fa1-548b-40b7-b58a-38c9748a97f3",
          2454338472,
          200
        ],
        [
          1479759291143,
          "294cdc6b-e0ad-4088-b590-db9b08667457",
          2525364623,
          200
        ],
        [
          1479759291721,
          "f183f597-6287-4a6b-b4b0-623eee090d54",
          2106279581,
          200
        ],
        [
          1479759292632,
          "a14c72ca-a414-4b0c-b85d-2d6ba3f26015",
          2016766426,
          200
        ],
        [
          1479759293752,
          "03188a31-1a64-403c-9b23-a201707b8f1c",
          9135815539,
          200
        ]
      ],
      "customStats": {},
      "concurrency": 11,
      "pendingRequests": 11
    }
  ]
};
  </script>

  <style>
      h1 {
        line-height: 200%;
      }

      body {
          background-color: #fcfcfc;
      }

      .container {
          width: 100%;
          min-width: 960px;
      }
  </style>


</head>
<body>

<div class="container">

<div class="row" id="header">
  <div class="col-lg-4 col-lg-offset-4">
    <pre style="font-size: 5pt; background-color: #fcfcfc; border: none;">
            _   _ _ _                                                _
  __ _ _ __| |_(_) | | ___ _ __ _   _      _ __ ___ _ __   ___  _ __| |_
 / _` | '__| __| | | |/ _ \ '__| | | |    | '__/ _ \ '_ \ / _ \| '__| __|
| (_| | |  | |_| | | |  __/ |  | |_| |    | | |  __/ |_) | (_) | |  | |_
 \__,_|_|   \__|_|_|_|\___|_|   \__, |    |_|  \___| .__/ \___/|_|   \__|
                                |___/              |_|

    </pre>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <h1 class="text-center" id="page-title">Test run on <span id="timestamp">date</span></h1>
  </div>
</div>

<div class="row">
  <div class="col-lg-3">
    <p><strong>Summary</strong></p>
    <table class="table table-bordered table-hover table-condensed">
      <tbody>
        <tr>
          <td>Test duration</td>
          <td><span id="testDuration">0</span> sec</td>
        </tr>
        <tr>
          <td>Scenarios created</td>
          <td><span id="scenariosCreated">0</span></td>
        </tr>

        <tr>
          <td>Scenarios completed</td>
          <td><span id="scenariosCompleted">0</span></td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="col-lg-5" id="scenarioCountsContainer">
    <div>
      <strong>Scenario counts:</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="scenarioCounts">
      </table>
    </div>
  </div>

  <div class="col-lg-1">
    <div id="codesContainer">
      <strong>Codes</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="codes">
      </table>
    </div>
  </div>

  <div class="col-lg-3">
    <div id="errorsContainer">
      <strong>Errors</strong>

      <p></p>

      <table class="table table-bordered table-hover table-condensed" id="errors">
      </table>
    </div>
  </div>
</div> <!-- /.row -->

<div class="row">
  <div class="text-center col-lg-12">
    <h2>Charts</h2>
  </div>
</div>

<div class="row">
  <div class="latency-histogram text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="latency text-center col-lg-12"></div>
</div>

<div class="latency-legend"></div>

<div class="row">

</div>

<div class="row">
  <div class="concurrency text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="rps-mean text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="rps-count text-center col-lg-12"></div>
</div>

<div class="row">
  <div class="codes-line text-center col-lg-12"></div>
</div>
<div class="row">
  <div class="errors-line text-center col-lg-12"></div>
</div>


  


</div>

<div class="row">
  <div class="col-lg-8 col-lg-offset-2">
    <h3 class="text-center">Raw report data</h3>
    <p>This is the raw JSON stats output that the report was generated from.</p>
    <div id="editor">
    </div>
  </div>
</div>

<script>
var editor = ace.edit("editor");
editor.getSession().setMode("ace/mode/javascript");
editor.setValue(JSON.stringify(Report, null, 2));
editor.gotoLine(1);editor.setHighlightActiveLine(false);

var l = _;

$('#timestamp').html(moment(Report.aggregate.timestamp).format('DD MMM YYYY HH:mm:SS'));
$('#testDuration').html(l.size(Report.intermediate) * 10);
$('#scenariosCompleted').html(Report.aggregate.scenariosCompleted);
$('#scenariosCreated').html(Report.aggregate.scenariosCreated);

var markers = [];
if(l.size(Report.phases) > 0) {
  markers = l.foldl(Report.phases, function(acc, phase, index) {
    var label = phase.name || 'Phase ' + (index + 1);
    var timestamp = (index === 0) ? 0 : Report.phases[index - 1].duration + acc[index - 1].timestamp;

    acc.push({
      timestamp: timestamp,
      label: label
    });

    return acc;
  }, []);
}

if (l.size(Report.aggregate.scenarioCounts) > 0) {
  l.each(Report.aggregate.scenarioCounts, function(count, name) {
    var $tdName = $('<td>' + name + '</td>');
    var percentage = Math.round(count / Report.aggregate.scenariosCompleted * 100 * 1000) / 1000;
    var $tdCount = $('<td>' + count + ' (' + percentage + '%)' + '</td>');
    var $el = $('<tr></tr>')
      .append($tdName)
      .append($tdCount)
      .appendTo($('#scenarioCounts'));
  });
} else {
  $('#scenarioCountsContainer').hide();
}

if (l.size(Report.aggregate.codes) > 0) {
  l.each(Report.aggregate.codes, function(count, code) {
    var anchor = '';
    if (code >= 100 && code < 200) {
      anchor = '#1xx_Informational';
    } else if (code >= 200 && code < 300) {
      anchor = '#2xx_Success';
    } else if (code >= 300 && code < 400) {
      anchor = '#3xx_Redirection';
    } else if (code >= 400 && code < 500) {
      anchor = '#4xx_Client_Error';
    } else if (code >= 500 && code < 600) {
      anchor = '#5xx_Server_Error';
    }

    var $a = $('<a>' + code + '</a>').attr('href', 'https://en.wikipedia.org/wiki/List_of_HTTP_status_codes' + anchor);
    var $td = $('<td></td>').append($a);
    var $el = $('<tr></tr>')
      .append($td)
      .append($('<td>' + count + '</td>'))
      .appendTo($('#codes'));
  });
} else {
  $('#codesContainer').hide();
}

if (l.size(Report.aggregate.errors) > 0) {
  l.each(Report.aggregate.errors, function(count, code) {
    var $el = $('<tr></tr>')
      .append($('<td>' + code + '</td>'))
      .append($('<td>' + count + '</td>'))
      .appendTo($('#errors'));
  });
} else {
  $('#errorsContainer > p').html('&#10004; Test completed without network or OS errors.');
}

var histogramData = l.map(Report.aggregate.latency, function(v, k) { return {bin: k, value: v} });

MG.data_graphic({
  chart_type: 'bar',
  x_label: 'Percentile',
  y_label: '(ms)',
  animate_on_load: true,
  title: 'Overall Latency Distribution',
  description: 'Distribution of all observed response latencies',
  target: '.latency-histogram',
  data: histogramData,
  x_accessor: 'bin',
  y_accessor: 'value',
  binned: true,
  height: 250,
  interpolate: 'monotone',
  padding_percentage: 0,
  bar_orientation: 'vertical',
  width: 450
});

var chartData = l.map(
  window.Report.intermediate,
  function(o,i) {
    return {
      timestamp: i*10+10,

      rpsMean: o.rps.mean,
      rpsCount: o.rps.count,
      concurrency: o.concurrency,
      latencyMax: o.latency.max,
      latencyp99: o.latency.p99,
      latencyp95: o.latency.p95,
      latencyMedian: o.latency.median,
      latencyMin: o.latency.min
    }
  });

//
// Response codes
//

if (l.size(Report.aggregate.codes) > 0) {
  var codesData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.codes, function(count, code) {
      res[code] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueCodes = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.codes, function(count, code) {
      if (l.indexOf(acc, code) === -1) {
        acc.push(code);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    x_label: 'Time',
    y_label: 'Count',
    title: 'HTTP codes',
    description: 'Occurence of HTTP response codes',
    target: '.codes-line',
    data: codesData,
    x_accessor: 'timestamp',
    y_accessor: uniqueCodes,
    legend: uniqueCodes,
    right: 50,
    chart_type: 'line',
    area: false,
    markers: markers,
    width: 900
  });
}

//
// Errors
//

if (l.size(Report.aggregate.errors) > 0) {
  var errorData = l.foldl(Report.intermediate, function(acc, o, i) {
    var res = {};
    res.timestamp = i*10+10;
    l.each(o.errors, function(count, name) {
      res[name] = count;
    });
    acc.push(res);
    return acc;
  }, []);
  var uniqueErrors = l.foldl(Report.intermediate, function(acc, o) {
    l.each(o.errors, function(count, name) {
      if (l.indexOf(acc, name) === -1) {
        acc.push(name);
      }
    });
    return acc;
  }, []);

  MG.data_graphic({
    title: 'Error Codes',
    description: 'Occurence of error codes',
    target: '.errors-line',
    data: errorData,
    x_accessor: 'timestamp',
    y_accessor: uniqueErrors,
    chart_type: 'line',
    area: false,
    markers: markers
  });

}

//
// Latency
//
MG.data_graphic({
  chart_type: 'line',
  x_label: 'Time',
  y_label: '(ms)',
  animate_on_load: true,
  area: false,
  title: "Latency At Intervals",
  description: "Latency values at different points during the test run",
  data: chartData,
  target: '.latency',
  width: 900,
  x_accessor: 'timestamp',
  y_accessor: ['latencyMin', 'latencyMedian', 'latencyp95', 'latencyMax'],
  legend: ['min', 'p50', 'p95', 'max'],
  //legend_target: '.latency-legend',
  right: 50,
  interpolate: 'monotone',
  mouseover: function(d, i) {
  },
  markers: markers
        });

            MG.data_graphic({
            animate_on_load: true,
            area: false,
            y_label: 'Count',
            x_label: 'Time',
            title: 'Concurrent users',
            description: 'Concurrent users',
            data: chartData,
            target: '.concurrency',
            x_accessor: 'timestamp',
            y_accessor: ['concurrency'],
            interpolate: 'monotone',
            markers: markers,
            width: 900
            });

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'Mean RPS',
  description: 'Mean requests per second',
  data: chartData,
  target: '.rps-mean',
  x_accessor: 'timestamp',
  y_accessor: ['rpsMean'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});

MG.data_graphic({
  animate_on_load: true,
  area: false,
  y_label: 'Count',
  x_label: 'Time',
  title: 'RPS Count',
  description: 'Count of requests per second',
  data: chartData,
  target: '.rps-count',
  x_accessor: 'timestamp',
  y_accessor: ['rpsCount'],
  interpolate: 'monotone',
  markers: markers,
  width: 900
});
</script>
<div id="footer">
  <footer>This report was created with <a href="https://artillery.io">Artillery</a> - free open-source load-testing for HTTP and WebSockets</footer>
</div>
</body>
</html>
